schema: '2.0'
stages:
  preprocess:
    cmd: python source/preprocess.py
    deps:
    - path: data/raw/
      hash: md5
      md5: 4a571532ce9da2135332013bf8878ef6.dir
      size: 1237987522
      nfiles: 672
    - path: source/preprocess.py
      hash: md5
      md5: 038e6f0730767e1fe7135158c95c4beb
      size: 5530
    params:
      params.yaml:
        preprocess.audio_dir: data/raw/simple_dataset/accompaniments
        preprocess.buffer_size: 128
        preprocess.hop_length: 1024
        preprocess.midi_dir: data/raw/simple_dataset/midi_solos
        preprocess.n_fft: 1024
        preprocess.win_length: 1024
    outs:
    - path: data/processed/
      hash: md5
      md5: 2d97bc02dd03e86aa24a4a3c150194bf.dir
      size: 788841734
      nfiles: 1
  train:
    cmd: python source/train.py
    deps:
    - path: data/processed/
      hash: md5
      md5: 2d97bc02dd03e86aa24a4a3c150194bf.dir
      size: 788841734
      nfiles: 1
    - path: source/model.py
      hash: md5
      md5: 19226ced2bb895168995f890e80e7c4e
      size: 1101
    - path: source/train.py
      hash: md5
      md5: 2959b021e4bfea3b64b8e150db335f75
      size: 12799
    params:
      params.yaml:
        model.hidden_size: 400
        model.num_lstm_layers: 2
        train.batch_size: 4096
        train.device_request: cuda
        train.epochs: 1000
        train.lambda_reg: 0.1
        train.learning_rate: 0.01
        train.max_voices: 1
        train.num_eval_batches: 10
    outs:
    - path: models/checkpoints/
      hash: md5
      md5: f342a3a6ffbe53a02dd0e38b64552c96.dir
      size: 12015622
      nfiles: 1
  save_logs:
    cmd: python source/utils/logs.py
    deps:
    - path: source/utils/logs.py
      hash: md5
      md5: c02425092772f434f06560a38e1960fd
      size: 9135
    outs:
    - path: exp_logs/
      hash: md5
      md5: f4db342ac1b13210c7bc7883bbc584ba.dir
      size: 103460
      nfiles: 2
