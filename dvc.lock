schema: '2.0'
stages:
  preprocess:
    cmd: python source/preprocess.py
    deps:
    - path: data/raw/
      hash: md5
      md5: 8ea91a777d100f9b38ecc953c7c41d06.dir
      size: 1186990230
      nfiles: 605
    - path: source/preprocess.py
      hash: md5
      md5: 86878346c80cd93b1d4d7b1f949fbfec
      size: 5640
    params:
      params.yaml:
        preprocess.audio_dir: data/raw/debug/separated_jazz_track_stems
        preprocess.buffer_size: 128
        preprocess.hop_length: 1024
        preprocess.midi_dir: data/raw/debug/midi_solos
        preprocess.n_fft: 1024
        preprocess.win_length: 1024
    outs:
    - path: data/processed/
      hash: md5
      md5: 30428c7afbc5576b910dc3430219fae2.dir
      size: 42645958
      nfiles: 1
  train:
    cmd: python source/train.py
    deps:
    - path: data/processed/
      hash: md5
      md5: 30428c7afbc5576b910dc3430219fae2.dir
      size: 42645958
      nfiles: 1
    - path: source/model.py
      hash: md5
      md5: 39e74c00fdc4440c25b10312267b9008
      size: 1090
    - path: source/train.py
      hash: md5
      md5: bf301d5a67cbcda01a759546a50d0f7a
      size: 13395
    params:
      params.yaml:
        model.hidden_size: 50
        model.num_lstm_layers: 2
        train.batch_size: 2048
        train.device_request: cuda
        train.epochs: 100
        train.lambda_reg: 0.0
        train.learning_rate: 0.01
        train.max_voices: 1
        train.num_eval_batches: 10
    outs:
    - path: models/checkpoints/
      hash: md5
      md5: 1253884d080949e3b0b225e58c24869c.dir
      size: 665308
      nfiles: 1
  save_logs:
    cmd: python source/utils/logs.py
    deps:
    - path: source/utils/logs.py
      hash: md5
      md5: c02425092772f434f06560a38e1960fd
      size: 9135
    outs:
    - path: exp_logs/
      hash: md5
      md5: 6c80aa9592152220f80009653cbfa34b.dir
      size: 1209137
      nfiles: 1
