schema: '2.0'
stages:
  preprocess:
    cmd: python source/preprocess.py
    deps:
    - path: data/raw/
      hash: md5
      md5: 47561e9b7e7b26531a5913084256c1c1.dir
      size: 1180249672
      nfiles: 601
    - path: source/preprocess.py
      hash: md5
      md5: 466f3e64ab4e96c5b8cb00be8c91e124
      size: 5421
    params:
      params.yaml:
        preprocess.audio_dir: data/raw/Small_Training_Set_DL4AD/accompaniments
        preprocess.buffer_size: 128
        preprocess.hop_length: 1024
        preprocess.midi_dir: data/raw/Small_Training_Set_DL4AD/midi_solos
        preprocess.n_fft: 1024
        preprocess.win_length: 1024
    outs:
    - path: data/processed/
      hash: md5
      md5: 647eabdfa9bdf52c4adf6fa8fbf84040.dir
      size: 7467038854
      nfiles: 1
  train:
    cmd: python source/train.py
    deps:
    - path: data/processed/
      hash: md5
      md5: 647eabdfa9bdf52c4adf6fa8fbf84040.dir
      size: 7467038854
      nfiles: 1
    - path: source/model.py
      hash: md5
      md5: bcfde965bc78e5e9e0180cf5a05be24d
      size: 493
    - path: source/train.py
      hash: md5
      md5: c1cf993d7aa1e6d04cdfe728a5709725
      size: 5749
    params:
      params.yaml:
        model.hidden_size: 20
        model.num_lstm_layers: 2
        train.batch_size: 32
        train.epochs: 20
        train.learning_rate: 0.01
    outs:
    - path: models/checkpoints/
      hash: md5
      md5: 3ca886a86b945519939530ce2d01bd6c.dir
      size: 197574
      nfiles: 1
  save_logs:
    cmd: python source/utils/logs.py
    deps:
    - path: source/utils/logs.py
      hash: md5
      md5: c02425092772f434f06560a38e1960fd
      size: 9135
    outs:
    - path: exp_logs/
      hash: md5
      md5: d8b642dba0d3468e2107d0eb0eb04276.dir
      size: 82019818
      nfiles: 2
